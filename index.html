<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>&lt;hydra-element&gt;</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç¨</text></svg>">
    <style>
      :root {
        --color-back: #242427;
        --color-text: #d6bb21;
      }

      body {
        margin: 0;
        font-family: monospace;
        background-color: var(--color-back);
      }

      textarea {
        width: 100%;
        height: 100%;
        z-index: 1;
        position: fixed;
        color: var(--color-text);
        background: transparent;
        border: 0;
        display: grid;
      }

      textarea:focus {
        outline: none;
      }

      hydra-element {
        display: grid;
      }
    </style>
    <script defer>
      const keypressHandler = (event) => {
        if (event.key === '\n') {
          document.querySelector('hydra-element').code = document.querySelector('textarea').value
        }
      }

      setTimeout(() => {
        document.querySelector('hydra-element').transforms = [{
          name: 'myNoise',
          type: 'src',
          inputs: [
            { type: 'float', name: 'scale', default: 5 },
            { type: 'float', name: 'offset', default: 0.5 }
          ],
          glsl: `return vec4(vec3(_noise(vec3(_st*scale, offset*time))), 0.5);`
        }]
      }, 1);
    </script>
    <script type="module" src="./index.js"></script>
  </head>
  <body onkeypress="keypressHandler(event)">
    <textarea name="editor" spellcheck="false"></textarea>
    <hydra-element audio="false">voronoi().out()</hydra-element>
  </body>
</html>
